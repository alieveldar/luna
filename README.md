# API Справочника Организаций

Полноценный REST API для управления справочниками организаций с иерархией видов деятельности, географическим поиском и управлением зданиями.

## Возможности

* **Управление Организациями**: Хранение и получение информации об организациях с несколькими номерами телефонов
* **Справочник Зданий**: Управление физическими зданиями с координатами для геопоиска
* **Иерархия Деятельности**: Поддержка до 3 уровней бизнес-активности (например, Питание > Мясная продукция > Говядина)
* **Географический Поиск**: Поиск организаций по близости или в пределах географических областей
* **Аутентификация API**: Защита эндпоинтов с помощью API-ключа
* **Документация Swagger**: Полная документация API доступна по адресу `/api/documentation`

## Аутентификация

Все эндпоинты API требуют аутентификацию с использованием API-ключа. Указывайте ключ в заголовке Authorization:

```http
Authorization: your-api-key-here
```

## Инструкция по Развертыванию

### Необходимое ПО

* Docker и Docker Compose
* Git
* GNU Make

### 1. Клонирование и Настройка

```bash
# Клонируйте репозиторий
git clone https://github.com/alieveldar/luna.git
cd luna

# Скопируйте файл окружения
cp src/.env.example src/.env

# Отредактируйте .env и задайте API-ключ
nano src/.env
```

### 2. Первоначальный Запуск через Make

```bash
make init
```

Команда `make init` выполняет:

* Запуск всех Docker-контейнеров
* Установку PHP и Node зависимостей
* Генерацию ключа Laravel
* Миграции и сидирование базы данных
* Генерацию документации Swagger

### 3. Полезные Команды Make

```bash
make up         # Запуск всех контейнеров
make down       # Остановка всех контейнеров
make restart    # Перезапуск всех контейнеров
make rebuild    # Полная пересборка контейнеров
make install    # Установка PHP и Node зависимостей
make key        # Генерация ключа приложения
make migrate    # Применение миграций
make seed       # Сидирование базы данных
make docs       # Генерация Swagger документации
make init       # Полный разворот проекта
make reset      # Сброс базы и сидирование заново
make fresh      # Только миграции и сидирование
```

## Доступ к Приложению

* **Базовый URL API**: `http://localhost:8080/api`
* **Swagger UI**: `http://localhost:8080/api/documentation`
* **База данных**: MySQL на `localhost:3306`
